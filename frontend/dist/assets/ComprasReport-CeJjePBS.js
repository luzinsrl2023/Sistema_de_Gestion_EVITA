import{R as y,H as J,r as se,j as n,D as ve,m as ye,n as xe,f as G,q as ge,s as be}from"./index-BzKEmjXo.js";import{i as je,D as Ae,f as we,E as Pe,c as q,d as W,e as Ne,A as Se,g as I,h as Oe,j as H,k as Ce,l as De,m as le,u as Ee,G as ke,n as Q,o as _e,X as ce,Y as ue,p as Fe,R as Z,C as Le,T as ee,L as te,P as Te,a as Ie,b as Re}from"./PieChart-TgYk0Ne_.js";var Be=["type","layout","connectNulls","ref"],Me=["key"];function D(e){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},D(e)}function re(e,r){if(e==null)return{};var a=$e(e,r),t,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function $e(e,r){if(e==null)return{};var a={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;a[t]=e[t]}return a}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},R.apply(this,arguments)}function ae(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,t)}return a}function g(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ae(Object(a),!0).forEach(function(t){j(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function C(e){return Ve(e)||ze(e)||Ke(e)||We()}function We(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(e,r){if(e){if(typeof e=="string")return X(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return X(e,r)}}function ze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ve(e){if(Array.isArray(e))return X(e)}function X(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function Ge(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ne(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,de(t.key),t)}}function qe(e,r,a){return r&&ne(e.prototype,r),a&&ne(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e,r,a){return r=z(r),He(e,pe()?Reflect.construct(r,a||[],z(e).constructor):r.apply(e,a))}function He(e,r){if(r&&(D(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xe(e)}function Xe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pe=function(){return!!e})()}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},z(e)}function Ye(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Y(e,r)}function Y(e,r){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Y(e,r)}function j(e,r,a){return r=de(r),r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function de(e){var r=Je(e,"string");return D(r)=="symbol"?r:r+""}function Je(e,r){if(D(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var t=a.call(e,r);if(D(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var B=function(e){function r(){var a;Ge(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return a=Ue(this,r,[].concat(i)),j(a,"state",{isAnimationFinished:!0,totalLength:0}),j(a,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),j(a,"getStrokeDasharray",function(s,l,c){var p=c.reduce(function(A,P){return A+P});if(!p)return a.generateSimpleStrokeDasharray(l,s);for(var h=Math.floor(s/p),m=s%p,d=l-s,f=[],u=0,v=0;u<c.length;v+=c[u],++u)if(v+c[u]>m){f=[].concat(C(c.slice(0,u)),[m-v]);break}var b=f.length%2===0?[0,d]:[d];return[].concat(C(r.repeat(c,h)),C(f),b).map(function(A){return"".concat(A,"px")}).join(", ")}),j(a,"id",Ee("recharts-line-")),j(a,"pathRef",function(s){a.mainCurve=s}),j(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),j(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return Ye(r,e),qe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();this.setState({totalLength:t})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();t!==this.state.totalLength&&this.setState({totalLength:t})}}},{key:"getTotalLength",value:function(){var t=this.mainCurve;try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(t,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,l=o.xAxis,c=o.yAxis,p=o.layout,h=o.children,m=we(h,Pe);if(!m)return null;var d=function(v,b){return{x:v.x,y:v.y,value:v.value,errorVal:le(v.payload,b)}},f={clipPath:t?"url(#clipPath-".concat(i,")"):null};return y.createElement(q,f,m.map(function(u){return y.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:s,xAxis:l,yAxis:c,layout:p,dataPointFormatter:d})}))}},{key:"renderDots",value:function(t,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,p=l.points,h=l.dataKey,m=W(this.props,!1),d=W(c,!0),f=p.map(function(v,b){var A=g(g(g({key:"dot-".concat(b),r:3},m),d),{},{index:b,cx:v.x,cy:v.y,value:v.value,dataKey:h,payload:v.payload,points:p});return r.renderDotItem(c,A)}),u={clipPath:t?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return y.createElement(q,R({className:"recharts-line-dots",key:"dots"},u),f)}},{key:"renderCurveStatically",value:function(t,i,o,s){var l=this.props,c=l.type,p=l.layout,h=l.connectNulls;l.ref;var m=re(l,Be),d=g(g(g({},W(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:t},s),{},{type:c,layout:p,connectNulls:h});return y.createElement(Ne,R({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(t,i){var o=this,s=this.props,l=s.points,c=s.strokeDasharray,p=s.isAnimationActive,h=s.animationBegin,m=s.animationDuration,d=s.animationEasing,f=s.animationId,u=s.animateNewValues,v=s.width,b=s.height,A=this.state,P=A.prevPoints,E=A.totalLength;return y.createElement(Se,{begin:h,duration:m,isActive:p,easing:d,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var w=S.t;if(P){var k=P.length/l.length,N=l.map(function(x,V){var L=Math.floor(V*k);if(P[L]){var T=P[L],O=I(T.x,x.x),he=I(T.y,x.y);return g(g({},x),{},{x:O(w),y:he(w)})}if(u){var me=I(v*2,x.x),fe=I(b/2,x.y);return g(g({},x),{},{x:me(w),y:fe(w)})}return g(g({},x),{},{x:x.x,y:x.y})});return o.renderCurveStatically(N,t,i)}var M=I(0,E),_=M(w),F;if(c){var $="".concat(c).split(/[,\s]+/gim).map(function(x){return parseFloat(x)});F=o.getStrokeDasharray(_,E,$)}else F=o.generateSimpleStrokeDasharray(E,_);return o.renderCurveStatically(l,t,i,{strokeDasharray:F})})}},{key:"renderCurve",value:function(t,i){var o=this.props,s=o.points,l=o.isAnimationActive,c=this.state,p=c.prevPoints,h=c.totalLength;return l&&s&&s.length&&(!p&&h>0||!Oe(p,s))?this.renderCurveWithAnimation(t,i):this.renderCurveStatically(s,t,i)}},{key:"render",value:function(){var t,i=this.props,o=i.hide,s=i.dot,l=i.points,c=i.className,p=i.xAxis,h=i.yAxis,m=i.top,d=i.left,f=i.width,u=i.height,v=i.isAnimationActive,b=i.id;if(o||!l||!l.length)return null;var A=this.state.isAnimationFinished,P=l.length===1,E=J("recharts-line",c),S=p&&p.allowDataOverflow,w=h&&h.allowDataOverflow,k=S||w,N=H(b)?this.id:b,M=(t=W(s,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},_=M.r,F=_===void 0?3:_,$=M.strokeWidth,x=$===void 0?2:$,V=Ce(s)?s:{},L=V.clipDot,T=L===void 0?!0:L,O=F*2+x;return y.createElement(q,{className:E},S||w?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(N)},y.createElement("rect",{x:S?d:d-f/2,y:w?m:m-u/2,width:S?f:f*2,height:w?u:u*2})),!T&&y.createElement("clipPath",{id:"clipPath-dots-".concat(N)},y.createElement("rect",{x:d-O/2,y:m-O/2,width:f+O,height:u+O}))):null,!P&&this.renderCurve(k,N),this.renderErrorBar(k,N),(P||s)&&this.renderDots(k,T,N),(!v||A)&&De.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(t,i){return t.animationId!==i.prevAnimationId?{prevAnimationId:t.animationId,curPoints:t.points,prevPoints:i.curPoints}:t.points!==i.curPoints?{curPoints:t.points}:null}},{key:"repeat",value:function(t,i){for(var o=t.length%2!==0?[].concat(C(t),[0]):t,s=[],l=0;l<i;++l)s=[].concat(C(s),C(o));return s}},{key:"renderDotItem",value:function(t,i){var o;if(y.isValidElement(t))o=y.cloneElement(t,i);else if(je(t))o=t(i);else{var s=i.key,l=re(i,Me),c=J("recharts-line-dot",typeof t!="boolean"?t.className:"");o=y.createElement(Ae,R({key:s},l,{className:c}))}return o}}])}(se.PureComponent);j(B,"displayName","Line");j(B,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ke.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});j(B,"getComposedData",function(e){var r=e.props,a=e.xAxis,t=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.dataKey,l=e.bandSize,c=e.displayedData,p=e.offset,h=r.layout,m=c.map(function(d,f){var u=le(d,s);return h==="horizontal"?{x:Q({axis:a,ticks:i,bandSize:l,entry:d,index:f}),y:H(u)?null:t.scale(u),value:u,payload:d}:{x:H(u)?null:a.scale(u),y:Q({axis:t,ticks:o,bandSize:l,entry:d,index:f}),value:u,payload:d}});return g({points:m,layout:h},p)});var Qe=_e({chartName:"LineChart",GraphicalChild:B,axisComponents:[{axisType:"xAxis",AxisComp:ce},{axisType:"yAxis",AxisComp:ue}],formatAxisMap:Fe});const U=[{month:"Ene",purchases:2400,suppliers:5},{month:"Feb",purchases:1398,suppliers:3},{month:"Mar",purchases:9800,suppliers:8},{month:"Abr",purchases:3908,suppliers:6},{month:"May",purchases:4800,suppliers:7},{month:"Jun",purchases:3800,suppliers:4},{month:"Jul",purchases:4300,suppliers:6},{month:"Ago",purchases:2400,suppliers:5},{month:"Sep",purchases:1398,suppliers:3},{month:"Oct",purchases:9800,suppliers:8},{month:"Nov",purchases:3908,suppliers:6},{month:"Dic",purchases:4800,suppliers:7}],ie=[{name:"Proveedor A",value:400},{name:"Proveedor B",value:300},{name:"Proveedor C",value:300},{name:"Proveedor D",value:200}],oe=["#0088FE","#00C49F","#FFBB28","#FF8042"];function tt(){const[e,r]=se.useState(()=>localStorage.getItem("report:compras:timeRange")||"monthly");y.useEffect(()=>{localStorage.setItem("report:compras:timeRange",e)},[e]);const a=()=>{const i=U.map(o=>({Mes:o.month,Compras:o.purchases,Proveedores:o.suppliers}));ge({filename:"reporte_compras_evita.xlsx",sheetName:"ReporteCompras",data:i})},t=()=>{const i=["Mes","Compras","Proveedores"],o=U.map(s=>[s.month,G(s.purchases),s.suppliers]);be({title:"Reporte de Compras - EVITA",head:i,body:o,filename:"reporte_compras_evita.pdf"})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Reporte de Compras"}),n.jsx("p",{className:"text-gray-400 mt-1",children:"Análisis de compras mensuales y distribución por proveedores"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"relative",children:n.jsxs("select",{value:e,onChange:i=>r(i.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none pr-8",children:[n.jsx("option",{value:"monthly",children:"Mensual"}),n.jsx("option",{value:"quarterly",children:"Trimestral"}),n.jsx("option",{value:"yearly",children:"Anual"})]})}),n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[n.jsx(ve,{className:"h-4 w-4"}),"Exportar"]}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[n.jsxs("button",{onClick:a,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:[n.jsx(ye,{className:"h-4 w-4"}),"Exportar Excel"]}),n.jsxs("button",{onClick:t,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:[n.jsx(xe,{className:"h-4 w-4"}),"Exportar PDF"]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg",children:n.jsx(K,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-white",children:G(48e3)}),n.jsx("p",{className:"text-sm text-gray-400",children:"Compras Totales"})]})]})}),n.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-500/10 text-green-400 rounded-lg",children:n.jsx(K,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-white",children:"25"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Proveedores"})]})]})}),n.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-500/10 text-purple-400 rounded-lg",children:n.jsx(K,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-white",children:G(1920)}),n.jsx("p",{className:"text-sm text-gray-400",children:"Promedio Mensual"})]})]})}),n.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-yellow-500/10 text-yellow-400 rounded-lg",children:n.jsx(K,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-white",children:"TecnoGlobal S.A."}),n.jsx("p",{className:"text-sm text-gray-400",children:"Proveedor Principal"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Compras Mensuales"}),n.jsx("div",{className:"h-80",children:n.jsx(Z,{width:"100%",height:"100%",children:n.jsxs(Qe,{data:U,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(Le,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(ce,{dataKey:"month",stroke:"#9CA3AF"}),n.jsx(ue,{stroke:"#9CA3AF"}),n.jsx(ee,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151"},itemStyle:{color:"#F9FAFB"},labelStyle:{color:"#F9FAFB"}}),n.jsx(te,{}),n.jsx(B,{type:"monotone",dataKey:"purchases",stroke:"#3B82F6",name:"Compras",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]}),n.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Distribución por Proveedores"}),n.jsx("div",{className:"h-80",children:n.jsx(Z,{width:"100%",height:"100%",children:n.jsxs(Te,{children:[n.jsx(Ie,{data:ie,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:i,percent:o})=>`${i} ${(o*100).toFixed(0)}%`,children:ie.map((i,o)=>n.jsx(Re,{fill:oe[o%oe.length]},`cell-${o}`))}),n.jsx(ee,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151"},itemStyle:{color:"#F9FAFB"},labelStyle:{color:"#F9FAFB"}}),n.jsx(te,{})]})})})]})]})]})}function K(){return n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"9",cy:"21",r:"1"}),n.jsx("circle",{cx:"20",cy:"21",r:"1"}),n.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})}export{tt as default};
