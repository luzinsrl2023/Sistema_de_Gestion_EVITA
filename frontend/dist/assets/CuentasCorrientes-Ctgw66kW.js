import{R as p,t as de,v as xe,j as e,D as q,f as j,S as me,C as he,F as ue,m as z,n as O,k,E as ge,x as U,q as G,s as J}from"./index-DfmaiBAy.js";import{u as pe}from"./usePagos-2YNzhsW6.js";import{u as ye}from"./useRecibos-Dyq5fLmQ.js";const W=r=>{let n;const o=new Set,m=(u,S)=>{const c=typeof u=="function"?u(n):u;if(!Object.is(c,n)){const v=n;n=S??(typeof c!="object"||c===null)?c:Object.assign({},n,c),o.forEach(w=>w(n,v))}},h=()=>n,b={setState:m,getState:h,getInitialState:()=>N,subscribe:u=>(o.add(u),()=>o.delete(u))},N=n=r(m,h,b);return b},be=r=>r?W(r):W,fe=r=>r;function je(r,n=fe){const o=p.useSyncExternalStore(r.subscribe,p.useCallback(()=>n(r.getState()),[r,n]),p.useCallback(()=>n(r.getInitialState()),[r,n]));return p.useDebugValue(o),o}const X=r=>{const n=be(r),o=m=>je(n,m);return Object.assign(o,n),o},Ne=r=>r?X(r):X;function ve(r,n){let o;try{o=r()}catch{return}return{getItem:h=>{var x;const y=N=>N===null?null:JSON.parse(N,void 0),b=(x=o.getItem(h))!=null?x:null;return b instanceof Promise?b.then(y):y(b)},setItem:(h,x)=>o.setItem(h,JSON.stringify(x,void 0)),removeItem:h=>o.removeItem(h)}}const $=r=>n=>{try{const o=r(n);return o instanceof Promise?o:{then(m){return $(m)(o)},catch(m){return this}}}catch(o){return{then(m){return this},catch(m){return $(m)(o)}}}},we=(r,n)=>(o,m,h)=>{let x={storage:ve(()=>localStorage),partialize:l=>l,version:0,merge:(l,P)=>({...P,...l}),...n},y=!1;const b=new Set,N=new Set;let u=x.storage;if(!u)return r((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${x.name}', the given storage is currently unavailable.`),o(...l)},m,h);const S=()=>{const l=x.partialize({...m()});return u.setItem(x.name,{state:l,version:x.version})},c=h.setState;h.setState=(l,P)=>(c(l,P),S());const v=r((...l)=>(o(...l),S()),m,h);h.getInitialState=()=>v;let w;const I=()=>{var l,P;if(!u)return;y=!1,b.forEach(g=>{var f;return g((f=m())!=null?f:v)});const F=((P=x.onRehydrateStorage)==null?void 0:P.call(x,(l=m())!=null?l:v))||void 0;return $(u.getItem.bind(u))(x.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==x.version){if(x.migrate){const f=x.migrate(g.state,g.version);return f instanceof Promise?f.then(D=>[!0,D]):[!0,f]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var f;const[D,M]=g;if(w=x.merge(M,(f=m())!=null?f:v),o(w,!0),D)return S()}).then(()=>{F==null||F(w,void 0),w=m(),y=!0,N.forEach(g=>g(w))}).catch(g=>{F==null||F(void 0,g)})};return h.persist={setOptions:l=>{x={...x,...l},l.storage&&(u=l.storage)},clearStorage:()=>{u==null||u.removeItem(x.name)},getOptions:()=>x,rehydrate:()=>I(),hasHydrated:()=>y,onHydrate:l=>(b.add(l),()=>{b.delete(l)}),onFinishHydration:l=>(N.add(l),()=>{N.delete(l)})},x.skipHydration||I(),w||v},Ce=we,Se=Ne(Ce(r=>({searchTerm:"",statusFilter:"all",selectedAccountId:null,setSearchTerm:n=>r({searchTerm:n}),setStatusFilter:n=>r({statusFilter:n}),setSelectedAccountId:n=>r({selectedAccountId:n})}),{name:"evita:cobranzas:ui"})),ke=[{value:"all",label:"Todos los estados"},{value:"pagado",label:"Pagado"},{value:"pendiente",label:"Pendiente"},{value:"vencido",label:"Vencido"},{value:"parcial",label:"Pago Parcial"}];function De(){const{data:r=[]}=de(),{data:n=[]}=pe(),{searchTerm:o,statusFilter:m,setSearchTerm:h,setStatusFilter:x}=Se(),y=p.useMemo(()=>{const t={};r.forEach(i=>{const d=i.client||"Cliente";t[d]||(t[d]={id:encodeURIComponent(d),client:d,totalAmount:0,invoices:0,hasOverdue:!1}),t[d].totalAmount+=Number(i.total||0),t[d].invoices+=1,i.status==="vencido"&&(t[d].hasOverdue=!0)});const s={},a={};return n.forEach(i=>{const d=i.client||"Cliente";s[d]=(s[d]||0)+Number(i.amount||0);const C=new Date(i.date),R=a[d]?new Date(a[d]):null;(!R||C>R)&&(a[d]=i.date)}),Object.values(t).map(i=>{const d=s[i.client]||0,C=Math.max(0,Number(i.totalAmount)-Number(d)),R=C<=0?"pagado":i.hasOverdue?"vencido":C<i.totalAmount?"parcial":"pendiente";return{...i,pendingAmount:C,status:R,lastPayment:a[i.client]||null}})},[r,n]),b=p.useMemo(()=>{let t=y;if(o){const s=o.toLowerCase();t=t.filter(a=>a.id.toLowerCase().includes(s)||a.client.toLowerCase().includes(s))}return m!=="all"&&(t=t.filter(s=>s.status===m)),t},[y,o,m]),{addRecibo:N}=ye(),[u,S]=p.useState(!1),[c,v]=p.useState(null),[w,I]=p.useState(!1),[l,P]=p.useState(null),[F,g]=p.useState(""),[f,D]=p.useState("efectivo"),[M,L]=p.useState(new Date().toISOString().split("T")[0]),[A,H]=p.useState(""),[_,B]=p.useState(""),Q=t=>{const a={pagado:{label:"Pagado",color:"bg-green-500/10 text-green-400"},pendiente:{label:"Pendiente",color:"bg-yellow-500/10 text-yellow-400"},vencido:{label:"Vencido",color:"bg-red-500/10 text-red-400"},parcial:{label:"Pago Parcial",color:"bg-blue-500/10 text-blue-400"}}[t]||{label:"Desconocido",color:"bg-gray-500/10 text-gray-400"};return e.jsxs("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${a.color}`,children:[e.jsx("span",{className:"w-2 h-2 mr-2 rounded-full bg-current"}),a.label]})},Y=()=>{try{const t=localStorage.getItem("evita-recibo-seq"),s=t?parseInt(t,10):0,a=isNaN(s)?1:s+1;return localStorage.setItem("evita-recibo-seq",String(a)),`RC-${String(a).padStart(6,"0")}`}catch{return`RC-${Date.now()}`}},Z=t=>{var i;const s=r.filter(d=>(d.client||"Cliente")===t);return s.length&&((i=s.slice().sort((d,C)=>new Date(C.date)-new Date(d.date))[0])==null?void 0:i.id)||""},ee=t=>{P(t),H(Z(t.client));const s=Number(t.pendingAmount||0);g(s>0?String(s.toFixed(2)):""),D("efectivo"),L(new Date().toISOString().split("T")[0]),B(""),I(!0)},te=async t=>{var C;if((C=t==null?void 0:t.preventDefault)==null||C.call(t),!l)return;const s=parseFloat(F);if(isNaN(s)||s<=0)return;const a=Y(),i=["Campo","Valor"],d=[["Recibo",a],["Fecha",M],["Cliente",l.client],["Factura",String(A||"-")],["Método",f],["Importe",j(s)]];_&&d.push(["Nota",_]);try{await N({id:a,fecha:M,cliente:l.client,facturaId:A||null,metodo:f,monto:s,saldo:null,manual:!0})}catch{}await U({title:"Recibo de Pago (Manual)",sections:[{title:"Detalle",head:i,body:d}],filename:`recibo-manual-${l.id}-${M}.pdf`}),alert("Recibo manual generado (no afecta saldo)."),I(!1)},se=xe(),ae=t=>{const s=y.find(a=>a.id===t);s&&se(`/cobranzas/composicion-saldos/${s.id}`,{state:{account:s}})},V=()=>{const t=b.map(s=>({ID:s.id,Cliente:s.client,Total:s.totalAmount,Pendiente:s.pendingAmount,"Último Pago":s.lastPayment||"N/A",Facturas:s.invoices,Estado:s.status}));G({filename:"cuentas_corrientes_evita.xlsx",sheetName:"CuentasCorrientes",data:t})},ne=()=>{const t=["ID","Cliente","Total","Pendiente","Último Pago","Facturas","Estado"],s=b.map(a=>[a.id,a.client,j(a.totalAmount),j(a.pendingAmount),a.lastPayment?k(a.lastPayment):"N/A",a.invoices,a.status]);J({title:"Reporte de Cuentas Corrientes - EVITA",head:t,body:s,filename:"cuentas_corrientes_evita.pdf"})},E=p.useMemo(()=>{const t=[...n].sort((i,d)=>new Date(d.date)-new Date(i.date)),s=new Date,a=new Date(s);return a.setDate(s.getDate()-30),t.filter(i=>{const d=new Date(i.date);return!isNaN(d)&&d>=a&&d<=s})},[n]),re=()=>{const t=E.map(s=>({Fecha:k(s.date),Cliente:s.client||"Cliente",Factura:s.invoiceId,Metodo:s.method,Monto:Number(s.amount||0)}));G({filename:"ultimos_pagos_evita.xlsx",sheetName:"UltimosPagos",data:t})},le=()=>{const t=["Fecha","Cliente","Factura","Método","Monto"],s=E.map(a=>[k(a.date),a.client||"Cliente",a.invoiceId,a.method,j(a.amount)]);J({title:"Últimos Pagos",head:t,body:s,filename:"ultimos_pagos_evita.pdf"})},ie=y.reduce((t,s)=>t+s.pendingAmount,0),oe=y.filter(t=>t.status==="vencido").length,ce=p.useMemo(()=>{const t=new Date,s=new Date(t);return s.setDate(t.getDate()-7),n.filter(a=>{const i=new Date(a.date);return!isNaN(i)&&i>=s&&i<=t}).reduce((a,i)=>a+Number(i.amount||0),0)},[n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Cuentas Corrientes"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Gestiona las cuentas corrientes de tus clientes"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(q,{className:"h-4 w-4"}),"Exportar Excel"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:y.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Cuentas"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 text-yellow-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:j(ie)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Pendiente"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/10 text-red-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:oe}),e.jsx("p",{className:"text-sm text-gray-400",children:"Cuentas Vencidas"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 text-green-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:j(ce)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Pagos últimos 7 días"})]})]})})]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Buscar cuenta por ID o cliente",value:o,onChange:t=>h(t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:m,onChange:t=>x(t.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none pr-8",children:ke.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx(he,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(ue,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsxs("button",{onClick:V,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:[e.jsx(z,{className:"h-4 w-4"}),"Exportar Excel"]}),e.jsxs("button",{onClick:ne,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:[e.jsx(O,{className:"h-4 w-4"}),"Exportar PDF"]})]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Cuenta"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Pendiente"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Último Pago"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-center",children:"Facturas"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:b.map(t=>e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm font-medium text-white",children:t.id})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400",children:t.client}),e.jsx("td",{className:"px-4 py-4 text-sm text-white text-right font-mono font-medium",children:j(t.totalAmount)}),e.jsx("td",{className:"px-4 py-4 text-sm text-white text-right font-mono font-medium",children:j(t.pendingAmount)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400",children:t.lastPayment?k(t.lastPayment):"N/A"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400 text-center",children:t.invoices}),e.jsx("td",{className:"px-4 py-4 text-sm",children:Q(t.status)}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>ee(t),title:"Generar recibo manual (no afecta saldo)",className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(t.id),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(ge,{className:"h-4 w-4"})})]})})]},t.id))})]})}),e.jsx("div",{className:"flex items-center justify-between p-4 border-t border-gray-800",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Mostrando ",e.jsx("span",{className:"font-medium text-white",children:"1"})," a"," ",e.jsx("span",{className:"font-medium text-white",children:b.length})," de"," ",e.jsx("span",{className:"font-medium text-white",children:y.length})," cuentas"]})})]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Últimos pagos (30 días)"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Historial de cobros recientes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:re,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(z,{className:"h-4 w-4"}),"Exportar Excel"]}),e.jsxs("button",{onClick:le,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(O,{className:"h-4 w-4"}),"Exportar PDF"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Factura"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Método"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Monto"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-800",children:[E.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:k(t.date)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:t.client||"Cliente"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:t.invoiceId}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:t.method}),e.jsx("td",{className:"px-4 py-3 text-sm text-white text-right font-mono font-medium",children:j(t.amount)})]},t.id||s)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-gray-400",children:"Sin pagos en los últimos 30 días"})})]})]})})]}),w&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Recibo Manual (no afecta saldo)"}),e.jsx("button",{onClick:()=>I(!1),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Cliente: ",e.jsx("span",{className:"text-white font-medium",children:l.client})]}),e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:"Factura (opcional)"}),e.jsx("input",{value:A,onChange:t=>H(t.target.value),placeholder:"INV-000...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:"Fecha"}),e.jsx("input",{type:"date",value:M,onChange:t=>L(t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:"Método"}),e.jsxs("select",{value:f,onChange:t=>D(t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"cheque",children:"Cheque"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:"Monto"}),e.jsx("input",{type:"number",step:"0.01",value:F,onChange:t=>g(t.target.value),placeholder:"0.00",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:"Nota (opcional)"}),e.jsx("textarea",{value:_,onChange:t=>B(t.target.value),rows:2,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Generar Recibo"})]})]})]})}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Composición de Saldos"}),e.jsx("button",{onClick:()=>{S(!1),v(null)},className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"ID de Cuenta"}),e.jsx("p",{className:"text-white font-medium",children:c.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Cliente"}),e.jsx("p",{className:"text-white font-medium",children:c.client})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total"}),e.jsx("p",{className:"text-white font-medium",children:j(c.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Pendiente"}),e.jsx("p",{className:"text-white font-medium",children:j(c.pendingAmount)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Facturas Pendientes"}),e.jsx("div",{className:"border border-gray-700 rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Factura"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Fecha"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Vencimiento"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400 text-right",children:"Pendiente"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Estado"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-800",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-white",children:"INV-001"}),e.jsx("td",{className:"px-4 py-2 text-gray-400",children:k("2023-12-10")}),e.jsx("td",{className:"px-4 py-2 text-gray-400",children:k("2023-12-20")}),e.jsx("td",{className:"px-4 py-2 text-white font-mono text-right",children:"$12,500.00"}),e.jsx("td",{className:"px-4 py-2 text-white font-mono text-right",children:"$12,500.00"}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("span",{className:"inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium bg-yellow-500/10 text-yellow-400",children:[e.jsx("span",{className:"w-2 h-2 mr-2 rounded-full bg-current"}),"Pendiente"]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-white",children:"INV-002"}),e.jsx("td",{className:"px-4 py-2 text-gray-400",children:k("2023-11-28")}),e.jsx("td",{className:"px-4 py-2 text-gray-400",children:k("2023-12-15")}),e.jsx("td",{className:"px-4 py-2 text-white font-mono text-right",children:"$5,000.00"}),e.jsx("td",{className:"px-4 py-2 text-white font-mono text-right",children:"$0.00"}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("span",{className:"inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium bg-green-500/10 text-green-400",children:[e.jsx("span",{className:"w-2 h-2 mr-2 rounded-full bg-current"}),"Pagado"]})})]})]})]})})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{onClick:()=>{S(!1),v(null)},className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Cerrar"}),e.jsx("button",{onClick:()=>{const t=["Campo","Valor"],s=[["Cuenta",String((c==null?void 0:c.id)||"")],["Cliente",String((c==null?void 0:c.client)||"")],["Total",j((c==null?void 0:c.totalAmount)||0)],["Pendiente",j((c==null?void 0:c.pendingAmount)||0)]];U({title:"Composición de Saldos",sections:[{title:"Resumen",head:t,body:s}],filename:`composicion_saldos_${c==null?void 0:c.id}.pdf`})},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Exportar PDF"})]})]})]})})]})}function T(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function K(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}export{De as default};
