import{c as $,r as o,u as q,j as e,I as O,D as w,P as H,a as E,f as p,S as J,C,F as W,b as X,d as Z,T as Q,e as m,w as Y,g as ee}from"./index-BzKEmjXo.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),P=[{id:"EVT001",name:"Limpiador Multiuso EVITA Pro",category:"Limpieza",sku:"LMP-EVT-001",stock:150,minStock:50,price:5.99,cost:3.5,status:"activo"},{id:"EVT002",name:"Desinfectante Antibacterial EVITA",category:"Limpieza",sku:"DES-EVT-002",stock:120,minStock:30,price:8.99,cost:5.2,status:"activo"},{id:"EVT003",name:"Jabón Líquido para Manos EVITA",category:"Limpieza",sku:"JAB-EVT-003",stock:20,minStock:50,price:3.99,cost:2.2,status:"activo"},{id:"EVT004",name:"Detergente en Polvo Concentrado",category:"Limpieza",sku:"DET-EVT-004",stock:80,minStock:25,price:12.99,cost:8.5,status:"activo"},{id:"EVT005",name:"Limpiavidrios Profesional EVITA",category:"Limpieza",sku:"LVD-EVT-005",stock:90,minStock:30,price:4.49,cost:2.8,status:"activo"},{id:"EVT006",name:"Bombillas LED Eco 12W",category:"Electricidad",sku:"LED-ECO-012",stock:180,minStock:50,price:3.49,cost:2.1,status:"activo"},{id:"EVT007",name:"Cable Eléctrico Flexible 2.5mm",category:"Electricidad",sku:"CAB-FLX-25",stock:45,minStock:25,price:2.99,cost:1.8,status:"activo"},{id:"EVT008",name:"Enchufe Universal con Toma Tierra",category:"Electricidad",sku:"ENC-UNI-TT",stock:200,minStock:75,price:4.79,cost:3.2,status:"activo"},{id:"EVT009",name:"Bolsas Basura Biodegradables 50L",category:"Artículos Generales",sku:"BOL-BIO-50",stock:250,minStock:100,price:1.99,cost:1.2,status:"activo"},{id:"EVT010",name:"Papel Higiénico Suave 4 Rollos",category:"Artículos Generales",sku:"PAP-HIG-4R",stock:300,minStock:150,price:2.99,cost:1.8,status:"activo"}],te=["Todos","Limpieza","Artículos Generales","Electricidad"];function oe(){const[c,A]=o.useState(P),[n,L]=o.useState(P),[i,y]=o.useState(""),[d,V]=o.useState("Todos"),[x,I]=o.useState("all"),[se,D]=o.useState(!1),f=q();o.useEffect(()=>{const t=new URLSearchParams(f.search).get("q")||"";y(t)},[f.search]);const[g,h]=o.useState([]),j=o.useRef(null);o.useEffect(()=>{let t=c;i&&(t=t.filter(a=>a.name.toLowerCase().includes(i.toLowerCase())||a.sku.toLowerCase().includes(i.toLowerCase())||a.category.toLowerCase().includes(i.toLowerCase()))),d!=="Todos"&&(t=t.filter(a=>a.category===d)),x==="low"?t=t.filter(a=>a.stock<=a.minStock):x==="out"&&(t=t.filter(a=>a.stock===0)),L(t)},[i,d,x,c]);const F=t=>t.stock===0?{label:"Agotado",color:"bg-red-500/10 text-red-400"}:t.stock<=t.minStock?{label:`${t.stock} (Bajo)`,color:"bg-yellow-500/10 text-yellow-400"}:{label:t.stock.toString(),color:"bg-green-500/10 text-green-400"},b=t=>`${((t.price-t.cost)/t.price*100).toFixed(1)}%`,M=t=>{h(a=>a.includes(t)?a.filter(l=>l!==t):[...a,t])},B=()=>{g.length===n.length?h([]):h(n.map(t=>t.id))},U=c.filter(t=>t.stock<=t.minStock).length,z=c.filter(t=>t.stock===0).length,N=()=>{const t=n.map(r=>({ID:r.id,Nombre:r.name,Categoría:r.category,SKU:r.sku,Stock:r.stock,"Stock Mínimo":r.minStock,Precio:r.price,Costo:r.cost,Margen:b(r),Estado:r.status})),a=m.json_to_sheet(t),l=m.book_new();m.book_append_sheet(l,a,"Productos"),Y(l,"productos_evita.xlsx")},_=()=>{var t;(t=j.current)==null||t.click()},R=t=>{const a=t.target.files[0];if(a){const l=new FileReader;l.onload=r=>{try{const u=new Uint8Array(r.target.result),k=ee(u,{type:"array"}),G=k.SheetNames[0],K=k.Sheets[G],v=m.sheet_to_json(K).map((s,S)=>({id:s.ID||s.id||`EVT${(c.length+S+1).toString().padStart(3,"0")}`,name:s.Nombre||s.name||s.Name||"",category:s.Categoría||s.category||s.Category||"Artículos Generales",sku:s.SKU||s.sku||s.SKU||`SKU-${Date.now()}-${S}`,stock:parseInt(s.Stock||s.stock||s.Stock||0),minStock:parseInt(s["Stock Mínimo"]||s.minStock||s["Min Stock"]||10),price:parseFloat(s.Precio||s.price||s.Price||0),cost:parseFloat(s.Costo||s.cost||s.Cost||0),status:s.Estado||s.status||s.Status||"activo"}));A(s=>[...s,...v]),alert(`Se importaron ${v.length} productos exitosamente`)}catch(u){alert("Error al procesar los datos del archivo Excel"),console.error("Import error:",u)}},l.readAsArrayBuffer(a)}t.target.value=""};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Catálogo EVITA"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Artículos de Limpieza, Electricidad y Mercancía General"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(O,{className:"h-4 w-4"}),"Importar Excel"]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(w,{className:"h-4 w-4"}),"Exportar Excel"]}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(H,{className:"h-4 w-4"}),"Nuevo Producto"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:c.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Productos"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 text-yellow-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:U}),e.jsx("p",{className:"text-sm text-gray-400",children:"Stock Bajo"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/10 text-red-400 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:z}),e.jsx("p",{className:"text-sm text-gray-400",children:"Agotado"})]})]})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 text-green-400 rounded-lg",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:p(c.reduce((t,a)=>t+a.stock*a.price,0))}),e.jsx("p",{className:"text-sm text-gray-400",children:"Valor Inventario"})]})]})})]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Buscar productos por nombre o SKU",value:i,onChange:t=>y(t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:d,onChange:t=>V(t.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none pr-8",children:te.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx(C,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:x,onChange:t=>I(t.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none pr-8",children:[e.jsx("option",{value:"all",children:"Todo el stock"}),e.jsx("option",{value:"low",children:"Stock bajo"}),e.jsx("option",{value:"out",children:"Agotado"})]}),e.jsx(C,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Exportar productos seleccionados",children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsx("input",{ref:j,type:"file",accept:".xlsx,.xls",onChange:R,className:"hidden"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/50",children:[e.jsx("th",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:g.length===n.length&&n.length>0,onChange:B,className:"rounded border-gray-600 text-green-600 focus:ring-green-500 focus:ring-offset-gray-900"})}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-center",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Costo"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400 text-right",children:"Margen"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium uppercase tracking-wider text-gray-400",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(t=>{const a=F(t);return e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:g.includes(t.id),onChange:()=>M(t.id),className:"rounded border-gray-600 text-green-600 focus:ring-green-500 focus:ring-offset-gray-900"})}),e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-white",children:t.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400 font-mono",children:t.sku}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-700 text-gray-300",children:t.category})}),e.jsx("td",{className:"px-4 py-4 text-sm text-center",children:e.jsxs("span",{className:X("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.color),children:[t.stock<=t.minStock&&e.jsx("span",{className:"w-2 h-2 mr-1.5 rounded-full bg-current"}),a.label]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400 text-right font-mono",children:p(t.cost)}),e.jsx("td",{className:"px-4 py-4 text-sm text-white text-right font-mono font-medium",children:p(t.price)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-400 text-right font-mono",children:b(t)}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})]})})]},t.id)})})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-800",children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["Mostrando ",e.jsx("span",{className:"font-medium text-white",children:"1"})," a"," ",e.jsx("span",{className:"font-medium text-white",children:n.length})," de"," ",e.jsx("span",{className:"font-medium text-white",children:c.length})," productos"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-white hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed rounded transition-colors",disabled:!0,children:"Anterior"}),e.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-white hover:bg-gray-800 rounded transition-colors",children:"Siguiente"})]})]})]})]})}export{oe as default};
